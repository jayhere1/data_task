
# JSON Data Processor

## Overview
This project is designed to process JSON files containing medical data related to patients and encounters, extract relevant information, and store it in a SQLite database. The processing script is implemented in Python and designed to be run in a Docker environment, utilizing asynchronous operations to enhance performance.

## Prerequisites
- Docker
- Docker Compose
- An internet connection to pull base images and dependencies

## Project Structure
- `emis_task/`: Main project directory containing the Python script and JSON data.
  - `main.py`: Main Python script for processing JSON files.
  - `exa-data-eng-assessment/data/`: Directory containing JSON data files.
- `pyproject.toml` and `poetry.lock`: Configuration files for Python project and dependency management using Poetry.
- `Dockerfile`: Docker configuration file to build the image.
- `docker-compose.yml`: Docker Compose configuration to orchestrate the container.

## Setup and Installation
1. **Clone the Repository**:
   Ensure you have Git installed on your system and clone this repository using:
   ```bash
   git clone https://github.com/jayhere1/data_task.git
   cd data_task
   ```

2. **Build the Docker Image**:
   Navigate to the directory containing the `Dockerfile` and run:
   ```bash
   docker-compose build
   ```
   This command builds the Docker image for the project, installing all required Python dependencies.

3. **Configure Environment Variables**:
   The Docker Compose file is configured with necessary environment variables. If you need to modify the paths or database configurations, edit the `docker-compose.yml` file.

## Running the Application
To start the application, use Docker Compose from the project root directory:
```bash
docker-compose up
```
This command starts the Docker container named `json_processor`, which processes the JSON files located in the `./emis_task/exa-data-eng-assessment/data/` directory and writes the output to the SQLite database in the `./sqlite_db` directory.

## Accessing Data
The SQLite database is stored in a volume that persists data even after the container is stopped. To access or manage the SQLite database:
- Use any SQLite client to connect to `./sqlite_db/processed_data.db`.

## Logs
Docker manages logs automatically. To view the logs generated by the application, use:
```bash
docker-compose logs
```

## Stopping the Application
To stop the application and remove containers, networks, and volumes created by `docker-compose up`, run:
```bash
docker-compose down -v
```

## Additional Notes
- The application is set to run indefinitely until stopped. Ensure to monitor disk usage if running for extended periods.
- Adjust the volume mounts in the `docker-compose.yml` if you prefer different directories for JSON data and the database.

